---
title:  "Micro Service 초보자 가이드"
excerpt: ""


categories:
-   프로젝트 관리
tags:
-   추진일정
-   팀관리
last_modified_at: 2020-08-01TO22:30:00+09:00
---

### 마이크로 서비스

도커가 마이크로서비스에 최적화된 도구이다.
Micro Service

### 마이크로 서비스의 정의

대단위의 서비스를 작은 단위의 서비스로 분해해서, 이것들을 결합해서 하나의 응용 프로그램을 만드는 아키텍처 스타일

작은 서비스는, 하나의 독립적인 비즈니스 로직이다.

이것들을 자동으로 배포할 수 있어야 한다.

이렇게 해서 작게 구성해놓은 것들이, 옛날처럼 중앙집중식으로 관리되어서는 안된다.

근데 너무 독립적으로 하면 관리가 안되니까, 최소한의 중심적인 관리 체계는 필요하다.

각각의 작은 서비스는,
각각 다른 프로그래밍 언어,
다른 스토리지로 구현해도 된다.

### 마이크로 서비스의 필요성

1. 클라우드 컴퓨팅의 일반화

처음에는 꺼려했지만, 사실 지금은 클라우드 컴퓨팅은 확실한 대세이다.
스타트업에게 클라우드는 정말 축복이다.

> 옛날 벤처 붐 때, 온라인 서비스, 인터넷 서비스도 굉장히 컸었는데,
> 그때도 서버 운영하려면 IDC에 장비 갖다 놓고, 굉장히 비쌌다
> 지금 클라우드보다 100배는 비쌌던 것 같다

2. 스케일링에 대한 중요성이 증가

예전보다 상상할 수 없는 트래픽을 처리하는 서비스들이 등장했다.

3. 시스템 규모가 커지면서 복잡성도 증가

지금 쓰는 SNS 서비스는 예전의 서비스보다 차원이 다른 큰 규모의 서비스이다.
너무나 복잡하다.

복잡도를 분석해주는 정적 분석 도구도 굉장히 많다.

복잡도의 범위를 작은 서비스 하나로 제한할 수 밖에 없는.

반대로 얘기하면, 저렇게 규모가 큰 서비스가 아니면 굳이 마이크로 서비스를 할 필요가 없다.
> 쓰는 사람도 몇 명 안되고, 트래픽도 얼마 안되면 굳이?

멘토님 얘기 : 11번가 시스템 분석
만들어진지 10년이 넘어가서
너무 복잡해져서 운영이 힘들었음

마이크로 서비스고 뭐고 그런게 아니라 한 통으로 만들어짐.
Component 레벨로 만들어져있다.
나름 12개 컴포넌트로 만들어져 있다.
그중에 전체 코드의 80프로가 두개 컴포넌트에 집중되어 있는 시스템이었다.
지금은 마이크로서비스화 되었다고 들었다.

monolithic 이라는 말 자체도 있던 말이 아니다.
monolithic vs micro service

여러분들의 서비스를 어떻게 구성하고 배포할 지를 그려보는게 매우 좋다.
이거의 인프라는 도커나 쿠버네티스들이 될 것 같다.

### 마이크로 서비스 특징

심플하며 개발 요구사항에 특화되어 있다.
개별 팀에서 독립적인 개발이나 배포가 가능해야한다
각각의 마이크로 서비스는 다른 프로그래밍 언어, 개발 도구로 개발할 수 있다.
각각의 마이크로 서비스는 서로 다른 저장소를 갖는다.
고속 개발에 최적화 - DevOps

### 마이크로 서비스의 문제점

각 문제점 별로 어떤게 그 문제의 해결점이 될 수 있는가

1. 서비스 범위를 어떻게 설정해야 하는가

> 마이크로? 그럼 얼마나 작아야 마이크로인데?

독립적으로 완결될 수 있는 비즈니스 로직이 담겨있으면 된다.
크기가 중요한게 아니다.
딱 끊어지는 로직이라고 한다면 작든 크든 중요하지 않다.
> 오히려 'Micro'라는 용어의 문제이다.

그래서 요즘은 **Cloud Native** Architecture라고 많이 말한다.

답이라고 생각하는 건 DDD 이다.
DDD에서 말하는 방법을 가지고 서비스의 범위를 정하는게 맞는 것 같다.

### 도메인 주도 설계 DDD

도메인이란,
특정 업종, 비즈니스, 현업의 경험 및 지식

소프트웨어는 현실문제를 해결하는 것이다.
현실을 잘 반영하는 것이 좋은 SW를 만드는 지름길이다.

도메인 분석이란,
도메인 내 업무, 또는 문제를 정의하고 이를 모델로 표현하는 일이다.

### BoundedContext 패턴

DDD에서 언급하는 많은 패턴 중에서, BoundedContext 패턴을 MSA에 사용하라고 많이 말한다.

2. 레거시 시스템

어느 회사든 기존에 만들어 놓은 IT 시스템이 없는 회사는 잘 없다.
아예 새로 만드는 걸 보통 차세대 프로젝트라고 한다.

현존하는 레거시를 유지하면서, 어떻게 MSA를 만들것인가

> MSA를 도입하는 것 뿐만 아니라, 도커를 도입하는 것에도 있을 수 있는 이슈이다

3. 운영 이슈

4. 중복 이슈: 코드/데이터

뚝뚝 끊어놓으면 어쩔 수 없이 코드랑 데이터가 중복되지 않냐
그거 어떻게 관리하냐

힌트 : miniservices
macro --- micro 하이브리드 형태라고 생각하면 될듯?

5. 복잡도
6. 분산 이슈

분산 트랜잭션을 어떻게 관리할 것인지

